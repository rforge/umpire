<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Kevin R. Coombes and Caitlin E. Coombes" />


<title>Umpire 2.0: Clinically Realistic Simulations</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Umpire 2.0: Clinically Realistic Simulations</h1>
<h4 class="author">Kevin R. Coombes and Caitlin E. Coombes</h4>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Version 2.0 of the Ultimate Microarray Prediction, Inference, and Reality Engine (Umpire) extends the functions of the Umpire 1.0 R package to allow researchers to simulate realistic, mixed-type, clinical data. Statisticians, computer scientists, and clinical informaticians who develop and improve methods to analyze clinical data from a variety of contexts (including clinical trials, population cohorts, and electronic medical record sources) recognize that it is difficult to evaluate methods on real data where “ground truth” is unknown. Frequently, they turn to simulations where the can control the underlying structure, which can result in simulations which are too simplistic to reflect complex clinical data realities. Clinical measurements on patients may be treated as independent, in spite of the elaborate correlation structures that arise in networks, pathways, organ systems, and syndromes in real biology. Further, the researcher finds limited tools at her disposal to facilitate simulation of binary, categorical, or mixed data at this representative level of biological<br />
complexity.</p>
<p>In this vignette, we describe a workflow with the <tt>Umpire</tt> package to simulate biologically realistic, mixed-type clinical data.</p>
<p>As usual, we start by loading the package:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">library</span>(Umpire)</span></code></pre></div>
</div>
<div id="simulating-mixed-type-clinical-data" class="section level2">
<h2>Simulating Mixed-Type Clinical Data</h2>
<div id="model-subtypes-and-survival" class="section level4">
<h4>Model Subtypes and Survival</h4>
<p>The simulation workflow begins by simulating complex, correlated, continuous data with known “ground truth” by implementing a <tt>ClinicalEngine</tt>. We simulate 20 features and 4 clusters of unequal size. The ClinicalEngine generates subtypes (clusters) with known “ground truth” through an implementation of the Umpire 1.0 <tt>CancerModel</tt> and <tt>CancerEngine</tt>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>ce &lt;-<span class="st"> </span>Umpire<span class="op">:::</span><span class="kw">ClinicalEngine</span>(<span class="dv">20</span>, <span class="dv">4</span>, <span class="dt">isWeighted=</span><span class="ot">TRUE</span>) <span class="co">#bug</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw">summary</span>(ce)</span></code></pre></div>
<pre><code>## A &#39;CancerEngine&#39; using the cancer model:
## --------------
## Clinical Simulation Model (Raw) , a CancerModel object constructed via the function call:
##  CancerModel(name = &quot;Clinical Simulation Model (Raw)&quot;, nPossible = nPos(nFeatures), nPattern = nClusters, HIT = hitfn, prevalence = Prevalence(isWeighted, nClusters)) 
## 
## Pattern prevalences:
## [1] 0.25 0.25 0.25 0.25
## 
## Survival effects:
##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
## -3.82066 -1.51352 -1.34965  0.09778  2.87007  3.14165 
## 
## Outcome effects:
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
## -3.0311 -1.5310 -0.4589 -0.6460  0.1838  1.6625 
## --------------
## 
## Base expression given by:
## An Engine with 10 components.
## 
## Altered expression given by:
## An Engine with 10 components.</code></pre>
</div>
<div id="simulate-raw-data" class="section level4">
<h4>Simulate Raw Data</h4>
<p>The <tt>ClinicalEngine</tt> is used to simulate the raw, base dataset.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">set.seed</span>(<span class="dv">194718</span>)</span>
<span id="cb4-2"><a href="#cb4-2"></a>dset &lt;-<span class="st"> </span><span class="kw">rand</span>(ce, <span class="dv">300</span>)</span></code></pre></div>
<p>Data are simulated as a list with two objects: simulated <tt>data</tt> and associated <tt>clinical</tt> information, including “ground truth” subtype membership and survival data (outcome, length of followup, and occurrence of event of interest within the followup period).</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">class</span>(dset)</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">names</span>(dset)</span></code></pre></div>
<pre><code>## [1] &quot;clinical&quot; &quot;data&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">summary</span>(dset<span class="op">$</span>clinical)</span></code></pre></div>
<pre><code>##  CancerSubType   Outcome         LFU          Event        
##  Min.   :1.000   Bad : 62   Min.   : 0.00   Mode :logical  
##  1st Qu.:2.000   Good:238   1st Qu.: 0.00   FALSE:52       
##  Median :3.000              Median : 1.00   TRUE :248      
##  Mean   :2.543              Mean   :10.13                  
##  3rd Qu.:4.000              3rd Qu.:12.25                  
##  Max.   :4.000              Max.   :71.00</code></pre>
<p>The raw <tt>data</tt> are simulated as a matrix of continuous values.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">class</span>(dset<span class="op">$</span>data)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot;</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">dim</span>(dset<span class="op">$</span>data)</span></code></pre></div>
<pre><code>## [1]  50 300</code></pre>
</div>
<div id="apply-clinically-realistic-noise" class="section level4">
<h4>Apply Clinically Realistic Noise</h4>
<p>The user may add further additive noise to the raw data. The <tt>ClinicalNoiseModel</tt> simulates additive noise for each feature <em>f</em> and patient <em>i</em> as a normal distribution <span class="math inline">\(E_{fi} \sim N(0, \tau)\)</span> , where the standard deviation <span class="math inline">\(\tau\)</span> varies with a hyperparameter along the gamma distribution <span class="math inline">\(\tau \sim Gamma(shape, scale)\)</span>. Thus, the ClinicalNoiseModel generates many features with low noise (such as a tightly calibrated laboratory test) and some features with high noise (such as a blood pressure measured by hand and manually entered into the medical record.) The user may apply default parameters or individual parameters. Next, the <tt>ClinicalNoiseModel</tt> is applied to <tt>blur</tt> the previously simulated data. The default model below generates a low overall level of additive noise.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>cnm &lt;-<span class="st"> </span><span class="kw">ClinicalNoiseModel</span>(<span class="dt">shape=</span><span class="fl">1.02</span>, <span class="dt">scale=</span><span class="fl">0.05</span>)</span>
<span id="cb15-2"><a href="#cb15-2"></a>noisy &lt;-<span class="st"> </span><span class="kw">blur</span>(cnm, dset<span class="op">$</span>data)</span></code></pre></div>
</div>
<div id="simulate-mixed-type-data" class="section level4">
<h4>Simulate Mixed-Type Data</h4>
<p><tt>Umpire 2.0</tt> allows the simulation of binary, nominal, and ordinal data from raw, continuous data in variable, user-defined mixtures. The user defines prevalences, summing to 1, of binary, continuous, and categorical data in the desired final mixture.</p>
<p>For categorical feature, the user may tune the percent of categorical data desired to be nominal and the range of number of categories to be simulated.</p>
<p>The data simulated above by the <tt>ClinicalEngine</tt> and <tt>ClinicalNoiseModel</tt> takes rows (not columns) as features, as an omics convention. Thus, by default, when generating mixed-type data, rows are treated as features and columns as patients.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>dt &lt;-<span class="st"> </span><span class="kw">setDataTypes</span>(dset<span class="op">$</span>data,</span>
<span id="cb16-2"><a href="#cb16-2"></a>                   <span class="dt">pCont =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>, <span class="dt">pBin =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>, <span class="dt">pCat =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">3</span>,</span>
<span id="cb16-3"><a href="#cb16-3"></a>                   <span class="dt">pNominal =</span> <span class="fl">0.5</span>, <span class="co">#range = 3:9, #bug</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>                   <span class="dt">inputRowsAreFeatures =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## 1</code></pre>
<p><tt>setDataTypes</tt> generates a list containing two objects: a data.frame of mixed-type data…</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="kw">names</span>(dt)</span></code></pre></div>
<pre><code>## [1] &quot;binned&quot;    &quot;cutpoints&quot;</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw">class</span>(dt<span class="op">$</span>binned)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="kw">dim</span>(dt<span class="op">$</span>binned)</span></code></pre></div>
<pre><code>## [1] 300  50</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="kw">summary</span>(dt<span class="op">$</span>binned)</span></code></pre></div>
<pre><code>##        V1           V2               V3             V4        V5     
##  V      :48   Min.   :0.0000   Min.   :0.00   Min.   :2.831   A:124  
##  W      :44   1st Qu.:0.0000   1st Qu.:0.00   1st Qu.:4.674   B: 94  
##  S      :38   Median :0.0000   Median :0.00   Median :5.183   C: 82  
##  R      :38   Mean   :0.4867   Mean   :0.27   Mean   :5.197          
##  X      :35   3rd Qu.:1.0000   3rd Qu.:1.00   3rd Qu.:5.711          
##  U      :34   Max.   :1.0000   Max.   :1.00   Max.   :7.364          
##  (Other):63                                                          
##        V6         V7           V8               V9             V10       
##  Min.   :0.0000   A:49   Min.   : 7.544   Min.   :5.098   Min.   :2.519  
##  1st Qu.:0.0000   B:90   1st Qu.: 9.819   1st Qu.:6.549   1st Qu.:3.747  
##  Median :0.0000   C:83   Median :10.456   Median :6.991   Median :4.551  
##  Mean   :0.4567   D:78   Mean   :10.449   Mean   :6.998   Mean   :4.557  
##  3rd Qu.:1.0000          3rd Qu.:11.075   3rd Qu.:7.412   3rd Qu.:5.304  
##  Max.   :1.0000          Max.   :13.462   Max.   :8.746   Max.   :6.643  
##                                                                          
##       V11            V12          V13            V14            V15       
##  Min.   :0.00   X      :50   Min.   :0.00   Min.   :0.00   Min.   :2.137  
##  1st Qu.:1.00   U      :43   1st Qu.:0.00   1st Qu.:0.00   1st Qu.:4.488  
##  Median :1.00   W      :41   Median :0.00   Median :1.00   Median :5.162  
##  Mean   :0.91   T      :38   Mean   :0.32   Mean   :0.71   Mean   :5.078  
##  3rd Qu.:1.00   Y      :36   3rd Qu.:1.00   3rd Qu.:1.00   3rd Qu.:5.650  
##  Max.   :1.00   S      :33   Max.   :1.00   Max.   :1.00   Max.   :7.969  
##                 (Other):59                                                
##       V16            V17         V18         V19             V20       
##  Min.   :0.00   Min.   :0.8361   A:79   Min.   :2.000   Min.   :4.803  
##  1st Qu.:0.00   1st Qu.:2.1900   B:53   1st Qu.:3.558   1st Qu.:6.288  
##  Median :0.00   Median :2.7994   C:98   Median :4.101   Median :6.925  
##  Mean   :0.05   Mean   :2.8929   D:70   Mean   :4.051   Mean   :6.954  
##  3rd Qu.:0.00   3rd Qu.:3.4948          3rd Qu.:4.596   3rd Qu.:7.636  
##  Max.   :1.00   Max.   :5.5691          Max.   :6.013   Max.   :9.681  
##                                                                        
##       V21        V22         V23        V24          V25      
##  Min.   :5.164   R:88   Min.   :3.076   A: 87   Min.   :0.00  
##  1st Qu.:6.592   T:72   1st Qu.:4.396   B: 92   1st Qu.:0.00  
##  Median :6.968   U:77   Median :4.784   C:121   Median :0.00  
##  Mean   :6.959   S:63   Mean   :4.757           Mean   :0.27  
##  3rd Qu.:7.365          3rd Qu.:5.122           3rd Qu.:1.00  
##  Max.   :8.673          Max.   :6.741           Max.   :1.00  
##                                                               
##       V26             V27           V28       V29         V30       V31   
##  Min.   :3.631   Min.   :0.0   Min.   :0.00   A:35   Min.   :0.00   A:81  
##  1st Qu.:5.233   1st Qu.:0.0   1st Qu.:0.00   B:53   1st Qu.:1.00   B:78  
##  Median :5.558   Median :0.0   Median :0.00   C:61   Median :1.00   C:64  
##  Mean   :5.592   Mean   :0.3   Mean   :0.23   D:44   Mean   :0.76   D:77  
##  3rd Qu.:5.930   3rd Qu.:1.0   3rd Qu.:0.00   E:59   3rd Qu.:1.00         
##  Max.   :7.668   Max.   :1.0   Max.   :1.00   F:48   Max.   :1.00         
##                                                                           
##  V32    V33         V34         V35    V36         V37      
##  A:91   A:54   Min.   :0.0000   A:52   T:40   Min.   :0.00  
##  B:68   B:88   1st Qu.:0.0000   B:79   S:30   1st Qu.:1.00  
##  C:76   C:61   Median :0.0000   C:83   X:62   Median :1.00  
##  D:65   D:97   Mean   :0.2867   D:86   W:42   Mean   :0.92  
##                3rd Qu.:1.0000          R:39   3rd Qu.:1.00  
##                Max.   :1.0000          U:28   Max.   :1.00  
##                                        V:59                 
##       V38             V39          V40           V41            V42       
##  Min.   :2.809   D      :52   Min.   :0.0   Min.   :0.00   Min.   :1.906  
##  1st Qu.:3.983   E      :43   1st Qu.:1.0   1st Qu.:0.00   1st Qu.:3.723  
##  Median :4.428   A      :42   Median :1.0   Median :0.00   Median :4.128  
##  Mean   :4.397   H      :42   Mean   :0.9   Mean   :0.28   Mean   :4.144  
##  3rd Qu.:4.834   B      :38   3rd Qu.:1.0   3rd Qu.:1.00   3rd Qu.:4.559  
##  Max.   :5.794   F      :37   Max.   :1.0   Max.   :1.00   Max.   :6.514  
##                  (Other):46                                               
##  V43         V44        V45         V46            V47       
##  A:44   Min.   :4.604   S:74   Min.   :0.00   Min.   :3.069  
##  B:34   1st Qu.:6.140   U:52   1st Qu.:0.00   1st Qu.:4.831  
##  C:43   Median :6.629   T:50   Median :0.00   Median :5.300  
##  D:53   Mean   :6.607   R:74   Mean   :0.26   Mean   :5.314  
##  E:39   3rd Qu.:7.079   V:50   3rd Qu.:1.00   3rd Qu.:5.811  
##  F:39   Max.   :8.586          Max.   :1.00   Max.   :7.287  
##  G:48                                                        
##       V48             V49            V50      
##  Min.   :5.500   Min.   :0.00   Min.   :0.00  
##  1st Qu.:7.325   1st Qu.:1.00   1st Qu.:1.00  
##  Median :7.789   Median :1.00   Median :1.00  
##  Mean   :7.868   Mean   :0.82   Mean   :0.77  
##  3rd Qu.:8.515   3rd Qu.:1.00   3rd Qu.:1.00  
##  Max.   :9.758   Max.   :1.00   Max.   :1.00  
## </code></pre>
<p>… and the applied <tt>cutpoints</tt> (a record, for each feature, of data type, break points, and labels) that can be saved for downstream use in the <tt>MixedTypeEngine</tt>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>cp &lt;-<span class="st"> </span>dt<span class="op">$</span>cutpoints</span>
<span id="cb26-2"><a href="#cb26-2"></a>type &lt;-<span class="st"> </span><span class="kw">sapply</span>(cp, <span class="cf">function</span>(X) { X<span class="op">$</span>Type })</span>
<span id="cb26-3"><a href="#cb26-3"></a><span class="kw">table</span>(type)</span></code></pre></div>
<pre><code>## type
## asymmetric binary        continuous           nominal           ordinal 
##                 1                16                 5                11 
##  symmetric binary 
##                17</code></pre>
</div>
</div>
<div id="the-mixedtypeengine" class="section level2">
<h2>The MixedTypeEngine</h2>
<p>The many parameters defining a simulated data mixture can be stored as a single <tt>MixedTypeEngine</tt> for downstream use to easily generate future datasets with the same simulation parameters.</p>
<p>The <tt>MixedTypeEngine</tt> stores the following components for re-implementation:</p>
<ol style="list-style-type: decimal">
<li>The <tt>ClinicalEngine</tt>, including parameters for generating the subtype pattern and survival model.</li>
<li>The <tt>ClinicalNoiseModel</tt>.</li>
<li>The <tt>cutpoints</tt> generated by <tt>setDataTypes</tt>.</li>
</ol>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>mte &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;MixedTypeEngine&quot;</span>,</span>
<span id="cb28-2"><a href="#cb28-2"></a>           ce,</span>
<span id="cb28-3"><a href="#cb28-3"></a>           <span class="dt">noise =</span> cnm,</span>
<span id="cb28-4"><a href="#cb28-4"></a>           <span class="dt">cutpoints =</span> dt<span class="op">$</span>cutpoints)</span>
<span id="cb28-5"><a href="#cb28-5"></a><span class="kw">summary</span>(mte) <span class="co">#bug</span></span></code></pre></div>
<pre><code>## A &#39;CancerEngine&#39; using the cancer model:
## --------------
## Clinical Simulation Model (Raw) , a CancerModel object constructed via the function call:
##  CancerModel(name = &quot;Clinical Simulation Model (Raw)&quot;, nPossible = nPos(nFeatures), nPattern = nClusters, HIT = hitfn, prevalence = Prevalence(isWeighted, nClusters)) 
## 
## Pattern prevalences:
## [1] 0.25 0.25 0.25 0.25
## 
## Survival effects:
##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
## -3.82066 -1.51352 -1.34965  0.09778  2.87007  3.14165 
## 
## Outcome effects:
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
## -3.0311 -1.5310 -0.4589 -0.6460  0.1838  1.6625 
## --------------
## 
## Base expression given by:
## An Engine with 10 components.
## 
## Altered expression given by:
## An Engine with 10 components.</code></pre>
<p>With <tt>rand</tt>, the user can easily generate new data sets with the same simulation parameters.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>dset2 &lt;-<span class="st"> </span><span class="kw">rand</span>(mte, <span class="dv">20</span>)</span>
<span id="cb30-2"><a href="#cb30-2"></a><span class="kw">class</span>(dset2)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="kw">summary</span>(dset2)</span></code></pre></div>
<pre><code>##        V1    V2     V3           V4        V5    V6     V7   
##  T      :5   0: 8   1: 9   Min.   :3.828   A:7   0: 9   A:7  
##  V      :3   1:12   0:11   1st Qu.:4.616   B:5   1:11   B:1  
##  W      :3                 Median :5.119   C:8          C:6  
##  R      :3                 Mean   :5.142                D:6  
##  X      :2                 3rd Qu.:5.639                     
##  Y      :2                 Max.   :6.384                     
##  (Other):2                                                   
##        V8               V9             V10        V11         V12   
##  Min.   : 8.553   Min.   :5.630   Min.   :2.990   0: 2   X      :6  
##  1st Qu.: 9.974   1st Qu.:6.419   1st Qu.:3.849   1:18   U      :5  
##  Median :10.560   Median :7.285   Median :4.580          S      :4  
##  Mean   :10.691   Mean   :7.148   Mean   :4.639          T      :3  
##  3rd Qu.:11.294   3rd Qu.:7.638   3rd Qu.:5.388          W      :1  
##  Max.   :12.800   Max.   :8.154   Max.   :6.252          R      :1  
##                                                          (Other):0  
##  V13    V14         V15        V16         V17        V18  
##  1:11   1:20   Min.   :2.416   0:19   Min.   :1.400   A:3  
##  0: 9   0: 0   1st Qu.:4.387   1: 1   1st Qu.:2.604   B:4  
##                Median :4.881          Median :3.248   C:9  
##                Mean   :4.828          Mean   :3.372   D:4  
##                3rd Qu.:5.554          3rd Qu.:4.247        
##                Max.   :6.435          Max.   :5.233        
##                                                            
##       V19             V20             V21        V22        V23       
##  Min.   :2.745   Min.   :5.146   Min.   :5.779   R:9   Min.   :3.633  
##  1st Qu.:4.049   1st Qu.:6.602   1st Qu.:6.393   T:3   1st Qu.:4.607  
##  Median :4.290   Median :6.975   Median :6.667   U:1   Median :4.869  
##  Mean   :4.159   Mean   :6.898   Mean   :6.734   S:7   Mean   :4.880  
##  3rd Qu.:4.486   3rd Qu.:7.458   3rd Qu.:7.197         3rd Qu.:5.196  
##  Max.   :4.741   Max.   :8.148   Max.   :7.739         Max.   :5.935  
##                                                                       
##  V24   V25         V26        V27    V28    V29   V30    V31   V32   
##  A:7   0:15   Min.   :4.616   0:11   1: 6   A:2   1:15   A:5   A:10  
##  B:4   1: 5   1st Qu.:5.280   1: 9   0:14   B:4   0: 5   B:7   B: 3  
##  C:9          Median :5.762                 C:3          C:3   C: 3  
##               Mean   :5.706                 D:1          D:5   D: 4  
##               3rd Qu.:5.997                 E:6                      
##               Max.   :7.072                 F:4                      
##                                                                      
##  V33   V34    V35   V36   V37         V38             V39    V40    V41   
##  A:6   1: 7   A:2   T:3   1:19   Min.   :3.331   B      :4   0: 0   0:12  
##  B:5   0:13   B:8   S:3   0: 1   1st Qu.:4.234   D      :4   1:20   1: 8  
##  C:4          C:3   X:3          Median :4.421   H      :4                
##  D:5          D:7   W:3          Mean   :4.574   E      :3                
##                     R:4          3rd Qu.:4.951   G      :2                
##                     U:0          Max.   :6.015   A      :1                
##                     V:4                          (Other):2                
##       V42        V43        V44        V45   V46         V47       
##  Min.   :3.039   A:5   Min.   :5.204   S:3   0:15   Min.   :3.726  
##  1st Qu.:3.479   B:2   1st Qu.:6.093   U:6   1: 5   1st Qu.:5.119  
##  Median :3.912   C:1   Median :6.540   T:4          Median :5.533  
##  Mean   :4.028   D:4   Mean   :6.596   R:1          Mean   :5.541  
##  3rd Qu.:4.597   E:4   3rd Qu.:6.975   V:6          3rd Qu.:6.077  
##  Max.   :5.087   F:2   Max.   :8.000                Max.   :6.856  
##                  G:2                                               
##       V48        V49    V50   
##  Min.   :5.208   0: 3   0: 3  
##  1st Qu.:7.541   1:17   1:17  
##  Median :8.433                
##  Mean   :8.073                
##  3rd Qu.:8.750                
##  Max.   :9.486                
## </code></pre>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
